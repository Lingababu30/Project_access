<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .data-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .data-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid #007bff;
        }
        
        .data-card.faculty {
            border-left-color: #28a745;
        }
        
        .data-card h3 {
            margin-top: 0;
            color: #333;
        }
        
        .data-field {
            margin-bottom: 8px;
        }
        
        .field-label {
            font-weight: bold;
            color: #555;
        }
        
        .timestamp {
            font-size: 12px;
            color: #888;
            margin-top: 10px;
        }
        
        .no-data {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Stored Project Data</h1>
        <p>View all submitted student and faculty data</p>
        <div id="dataStats" style="background:#e9ecef;padding:15px;border-radius:8px;margin:20px 0;">
            <strong>Data Storage Statistics:</strong>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px;margin-top:10px;">
                <div>üìö Students: <span id="studentCount">0</span></div>
                <div>üë®‚Äçüè´ Faculty: <span id="facultyCount">0</span></div>
                <div>üìä Total: <span id="totalCount">0</span></div>
            </div>
        </div>
    </div>
    
    <div class="controls">
        <button class="btn btn-primary" onclick="refreshData()">Refresh All Data</button>
        <button class="btn btn-secondary" onclick="showStudentsOnly()">Students Only</button>
        <button class="btn btn-secondary" onclick="showFacultyOnly()">Faculty Only</button>
        <button class="btn btn-secondary" onclick="exportData()">Export All Data</button>
        <button class="btn btn-danger" onclick="clearStudentData()">Clear Student Data</button>
        <button class="btn btn-danger" onclick="clearFacultyData()">Clear Faculty Data</button>
        <button class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
        <button class="btn btn-secondary" onclick="goBack()">Back to Login</button>
    </div>
    
    <div id="dataContainer" class="data-container">
    </div>
    
    <script>
        function loadData() {
            const studentData = JSON.parse(localStorage.getItem('studentData')) || [];
            const facultyData = JSON.parse(localStorage.getItem('facultyData')) || [];
                        const allData = [...studentData, ...facultyData];
                        allData.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            displayData(allData, 'All Data');
        }
        
        function showStudentsOnly() {
            const studentData = JSON.parse(localStorage.getItem('studentData')) || [];
            studentData.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            displayData(studentData, 'Student Data Only');
        }
        
        function showFacultyOnly() {
            const facultyData = JSON.parse(localStorage.getItem('facultyData')) || [];
            facultyData.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            displayData(facultyData, 'Faculty Data Only');
        }
        
        function displayData(data, title) {
            const container = document.getElementById('dataContainer');
            
            document.querySelector('.header h1').textContent = title;
                        updateStats();
            
            if (data.length === 0) {
                container.innerHTML = '<div class="no-data">No data found. Submit some forms first!</div>';
                return;
            }
            
            container.innerHTML = '';
            
            data.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = `data-card ${item.type}`;
                
                if (item.type === 'student') {
                    card.innerHTML = `
                        <h3>Student Entry #${index + 1}</h3>
                        <div class="data-field">
                            <span class="field-label">Name:</span> ${item.name}
                        </div>
                        <div class="data-field">
                            <span class="field-label">Project Title:</span> ${item.project}
                        </div>
                        <div class="data-field">
                            <span class="field-label">Domain:</span> ${item.domain}
                        </div>
                        <div class="data-field">
                            <span class="field-label">Team Members:</span> ${item.members}
                        </div>
                        <div class="timestamp">
                            Submitted: ${new Date(item.timestamp).toLocaleString()}
                        </div>
                        <button class="btn btn-danger" style="margin-top:10px;font-size:12px;padding:5px 10px;" onclick="deleteStudentRecord(${index})">Delete</button>
                    `;
                } else if (item.type === 'faculty') {
                    card.innerHTML = `
                        <h3>Faculty Entry #${index + 1}</h3>
                        <div class="data-field">
                            <span class="field-label">Name:</span> ${item.name}
                        </div>
                        <div class="data-field">
                            <span class="field-label">Number of Teams:</span> ${item.teams}
                        </div>
                        <div class="timestamp">
                            Submitted: ${new Date(item.timestamp).toLocaleString()}
                        </div>
                        <button class="btn btn-danger" style="margin-top:10px;font-size:12px;padding:5px 10px;" onclick="deleteFacultyRecord(${index})">Delete</button>
                    `;
                }
                
                container.appendChild(card);
            });
        }
        
        function updateStats() {
            const studentData = JSON.parse(localStorage.getItem('studentData')) || [];
            const facultyData = JSON.parse(localStorage.getItem('facultyData')) || [];
            
            document.getElementById('studentCount').textContent = studentData.length;
            document.getElementById('facultyCount').textContent = facultyData.length;
            document.getElementById('totalCount').textContent = studentData.length + facultyData.length;
        }
        
        function refreshData() {
            loadData();
        }
        
        function exportData() {
            const studentData = JSON.parse(localStorage.getItem('studentData')) || [];
            const facultyData = JSON.parse(localStorage.getItem('facultyData')) || [];
            
            const exportData = {
                students: studentData,
                faculty: facultyData,
                exportTimestamp: new Date().toISOString(),
                totalStudents: studentData.length,
                totalFaculty: facultyData.length
            };
            
            if (studentData.length === 0 && facultyData.length === 0) {
                alert('No data to export!');
                return;
            }
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'project-data-separated.json';
            link.click();
            URL.revokeObjectURL(url);
        }
        
        function clearStudentData() {
            if (confirm('Are you sure you want to clear all STUDENT data? This action cannot be undone.')) {
                localStorage.removeItem('studentData');
                loadData();
                alert('All student data has been cleared.');
            }
        }
        
        function clearFacultyData() {
            if (confirm('Are you sure you want to clear all FACULTY data? This action cannot be undone.')) {
                localStorage.removeItem('facultyData');
                loadData();
                alert('All faculty data has been cleared.');
            }
        }
        
        function clearAllData() {
            if (confirm('Are you sure you want to clear ALL stored data (both student and faculty)? This action cannot be undone.')) {
                localStorage.removeItem('studentData');
                localStorage.removeItem('facultyData');
                localStorage.removeItem('projectData');
                loadData();
                alert('All data has been cleared.');
            }
        }
        
        function deleteStudentRecord(index) {
            if (confirm('Are you sure you want to delete this student record?')) {
                let studentData = JSON.parse(localStorage.getItem('studentData')) || [];
                studentData.splice(index, 1);
                localStorage.setItem('studentData', JSON.stringify(studentData));
                showStudentsOnly(); // Refresh student view
                alert('Student record deleted successfully.');
            }
        }
        
        function deleteFacultyRecord(index) {
            if (confirm('Are you sure you want to delete this faculty record?')) {
                let facultyData = JSON.parse(localStorage.getItem('facultyData')) || [];
                facultyData.splice(index, 1);
                localStorage.setItem('facultyData', JSON.stringify(facultyData));
                showFacultyOnly(); // Refresh faculty view
                alert('Faculty record deleted successfully.');
            }
        }
        
        function refreshData() {
            loadData();
        }
        
        function goBack() {
            window.location.href = 'index.html';
        }
                window.onload = loadData;
    </script>
</body>
</html>
